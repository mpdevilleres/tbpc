language: python

python:
  - 3.5

services:
  - docker

env:
  - DEBUG=True
  - TEMPLATE_DEBUG=True
  - SECRET_KEY=secret
  - DB_NAME=postgres
  - DB_USER=postgres
  - DB_PASS=postgres
  - DB_SERVICE=postgres
  - DB_PORT=5432

before_install:
  - docker-compose build

install:
#  - pip install -q . --use-mirrors
#  - pip install -r web/requirements.txt
#  - pip install django==$DJANGO --quiet
#  - pip install psycopg2 --quiet

before_script:
  - docker-compose up -d
  - cd web

script:
  - docker-compose run web py.test -v

after_success:
  coveralls